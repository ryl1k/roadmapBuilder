{% extends 'recommendations/base.html' %}

{% block title %}Course Catalog - Course Recommendation Platform{% endblock %}

{% block extra_styles %}
<style>
    .domain-section {
        margin-bottom: 3rem;
    }

    .domain-header {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 1rem 1.5rem;
        border-radius: 8px 8px 0 0;
        margin-bottom: 0;
    }

    .courses-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
        gap: 1.5rem;
        padding: 1.5rem;
        background: white;
        border-radius: 0 0 8px 8px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    .course-card {
        border: 1px solid #e0e0e0;
        border-radius: 8px;
        padding: 1.5rem;
        transition: transform 0.2s, box-shadow 0.2s;
    }

    .course-card:hover {
        transform: translateY(-4px);
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    }

    .course-card h4 {
        color: #333;
        margin-bottom: 0.75rem;
        font-size: 1.1rem;
    }

    .course-info {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
        font-size: 0.9rem;
        color: #666;
    }

    .info-row {
        display: flex;
        gap: 0.5rem;
    }

    .info-label {
        font-weight: 600;
        min-width: 80px;
    }

    .tags {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
        margin-top: 0.75rem;
    }

    .tag {
        background: #f0f0f0;
        padding: 0.25rem 0.75rem;
        border-radius: 12px;
        font-size: 0.8rem;
        color: #555;
    }

    .prereq-badge {
        background: #fff3cd;
        color: #856404;
        padding: 0.25rem 0.75rem;
        border-radius: 4px;
        font-size: 0.85rem;
        display: inline-block;
        margin-top: 0.5rem;
    }

    .stats-header {
        background: white;
        padding: 2rem;
        border-radius: 8px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        margin-bottom: 2rem;
        text-align: center;
    }

    .stats-header h2 {
        margin-bottom: 0.5rem;
    }
</style>
{% endblock %}

{% block content %}
<div class="stats-header">
    <h2>Course Catalog</h2>
    <p style="color: #666;">Browse {{ total_courses }} available courses across all domains</p>
</div>

{% for domain, courses in courses_by_domain.items %}
<div class="domain-section">
    <div class="domain-header">
        <h3>{{ domain }}</h3>
        <p style="opacity: 0.9; margin-top: 0.25rem;">{{ courses|length }} course{{ courses|length|pluralize }}</p>
    </div>

    <div class="courses-grid">
        {% for course in courses %}
        <div class="course-card">
            <h4>{{ course.title }}</h4>

            <div class="course-info">
                <div class="info-row">
                    <span class="info-label">Level:</span>
                    <span>{{ course.level }}</span>
                </div>

                <div class="info-row">
                    <span class="info-label">Duration:</span>
                    <span>{{ course.durationHours }} hours</span>
                </div>

                <div class="info-row">
                    <span class="info-label">Score:</span>
                    <span>{{ course.score }}</span>
                </div>

                <div class="info-row">
                    <span class="info-label">Course ID:</span>
                    <span>#{{ course.id }}</span>
                </div>
            </div>

            {% if course.tags %}
            <div class="tags">
                {% for tag in course.tags %}
                <span class="tag">{{ tag }}</span>
                {% endfor %}
            </div>
            {% endif %}

            {% if course.prerequisiteCourseIds %}
            <div class="prereq-badge">
                Requires: {% for prereq in course.prerequisiteCourseIds %}#{{ prereq }}{% if not forloop.last %}, {% endif %}{% endfor %}
            </div>
            {% endif %}
        </div>
        {% endfor %}
    </div>
</div>
{% endfor %}

{% if not courses_by_domain %}
<div class="card">
    <p>No courses available. Please ensure the backend server is running.</p>
</div>
{% endif %}

<div style="text-align: center; margin-top: 2rem;">
    <a href="{% url 'recommendations:index' %}" class="btn">Get Personalized Recommendations</a>
</div>
{% endblock %}
